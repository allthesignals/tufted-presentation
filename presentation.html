<!DOCTYPE html>
<html>
  <head>
    <title>D3 + Miso.Dataset</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <style type="text/css">
      @import url(http://fonts.googleapis.com/css?family=Droid+Serif);
      @import url(http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);

      body {
        font-family: 'Droid Serif';
        font-size: 20px;
      }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: 400;
        margin-bottom: 0;
      }
      h1 { font-size: 4em; }
      h2 { font-size: 2em; }
      h3 { font-size: 1.6em; }
      .footnote {
        position: absolute;
        bottom: 3em;
      }
      li p { line-height: 1.25em; }
      .red { color: #fa0000; }
      .large { font-size: 2em; }
      a, a > code {
        color: rgb(249, 38, 114);
        text-decoration: none;
      }
      code {
        -moz-border-radius: 5px;
        -web-border-radius: 5px;
        background: #e7e8e2;
        border-radius: 5px;
        font-size: 16px;
      }
      .pull-left {
        float: left;
        width: 47%;
      }
      .pull-right {
        float: right;
        width: 47%;
      }
      .pull-right ~ p {
        clear: both;
      }
      #slideshow .slide .content code {
        font-size: 0.8em;
      }
      #slideshow .slide .content pre code {
        font-size: 0.9em;
        padding: 15px;
      }
      .inverse {
        background: #272822;
        color: #777872;
        text-shadow: 0 0 20px #333;
      }
      .inverse h1, .inverse h2 {
        color: #f3f3f3;
        line-height: 0.8em;
      }

      /* Slide-specific styling */
      #slide-inverse .footnote {
        bottom: 12px;
        left: 20px;
      }
      #slide-how .slides {
        font-size: 0.9em;
        position: absolute;
        top:  151px;
        right: 140px;
      }
      #slide-how .slides h3 {
        margin-top: 0.2em;
      }
      #slide-how .slides .first, #slide-how .slides .second {
        padding: 1px 20px;
        height: 90px;
        width: 120px;
        -moz-box-shadow: 0 0 10px #777;
        -webkit-box-shadow: 0 0 10px #777;
        box-shadow: 0 0 10px #777;
      }
      #slide-how .slides .first {
        background: #fff;
        position: absolute;
        top: 20%;
        left: 20%;
        z-index: 1;
      }
      #slide-how .slides .second {
        position: relative;
        background: #fff;
        z-index: 0;
      }

      /* Two-column layout */
      .left-column {
        color: #777;
        width: 20%;
        height: 92%;
        float: left;
      }
        .left-column h2:last-of-type, .left-column h3:last-child {
          color: #000;
        }
      .right-column {
        width: 75%;
        float: right;
        padding-top: 1em;
      }
    </style>
  </head>
  <body>
    <textarea id="source">

name: inverse
layout: true
class: center, middle, inverse

---

# Introduction to D3
# + Miso.Dataset

---

template: inverse
# What's D3?

---

layout: false
# D3 abstracts

1. Harder to learn
2. But very powerful!

---
layout: false

#Data Driven Documents

## Great for "learning the web"

1. Hypertext Markup Language
2. Cascading Style Sheets
3. Javascript
4. Scalable Vector Graphics
5. The Document Object Model

---
layout: false
.left-column[
  ## Basic Structure

]
.right-column[

Place the D3 library inside your document

```xml
  <!doctype html>
  <html lang="en">
  <head>
    <style>
    /* styles! */
    </style>
    <meta charset="UTF-8">
    <title>My D3</title>
  </head>
  <body>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8">
    // D3 goes here!
    </script>
    
  </body>
  </html>
```
]
---
layout: false
.left-column[
## Javascript arrays

]
.right-column[



```javascript
var dataset = [ 5, 10, 13, 30, 50 ];
``` 
]

---

.left-column[
## Data joins

]
.right-column[


```javascript
var data = [5,10,20,15,18];

d3.select("svg").selectAll("circle")
  .data(data)
  .enter()
  .append("circle");
```]

---

.left-column[
## Data joins
]
.right-column[


```javascript
var data = [5,10,20,15,18];

d3.select("svg").selectAll("circle")
```]

1. selectAll() : Select the things that don't exist yet
![Alt text](circles1.png) 
---

.left-column[
## Data joins
]
.right-column[


```javascript
var data = [5,10,20,15,18];

d3.select("svg").selectAll("circle")
  .data(data)
```]

1. selectAll() : Select the things that don't exist yet
2. data() : Hand our data to the data function
![Alt text](circles2.png) 
---

.left-column[
## Data joins



]
.right-column[


```javascript
var data = [5,10,20,15,18];

d3.select("svg").selectAll("circle")
  .data(data)
  .enter();
```]

1. selectAll() : Selects the things that don't exist yet
2. data() : Hand our data to the data function
3. enter() : The enter function binds the values to the elements

![Alt text](circles2.png) 
---

.left-column[
## Data joins

]
.right-column[


```javascript
var data = [5,10,20,15,18];

d3.select("svg").selectAll("circle")
  .data(data)
  .enter()
  .append("circle");
```]

1. selectAll() : Select the things that don't exist yet
2. data() : Hand our data to the data function
3. enter() : The enter function binds the values to the elements
4. append() : Append circles to the SVG
![Alt text](circles3.png) 

---

template: inverse
#Coding Example!

---

.left-column[
##Scales
]
.right-column[
“Scales are functions that map from an input domain to an output range.”

- Mike Bostock

```javascript
var scale = d3.scale.linear()
  .domain([200,1000])
  .range([0.500]);

  scale(600); // returns 250
```

1. Built-in scales map data values to pixel values


![Alt text](scales.png)
]


---

.left-column[
## Asynchronous Calls

]
.right-column[

##So how to actually use data?

```javascript
d3.csv("data.csv", function(error, data) {

  d3.select("svg").selectAll("circle")
  .data(data)
  .enter()
  .append("circle");

});
```

1. D3 locates your CSV file
2. It assumes the first row contains the fields
3. Inserts each column/value pair into an array of objects

]

---

template: inverse

#Miso.Dataset
###Client-side data transformation and management library

---
template: inverse
#Why another library?

---
layout: false
.left-column[
  ## Data conversion
]
.right-column[
## Raw data format (CSV, TSV, etc.)

```
MSA ID,MSA Name,Year,Source,In labor force with less than a high school diploma,"In labor force with less than a high school diploma, margin of error",In labor force with only a high school diploma,"In labor force with only a high school diploma, margin of error",In labor force with some college or associate degree,"In labor force with some college or associate degree, margin of error",In labor force with some college or associate degree,"In labor force with bachelor degree or higher, margin of error",% In labor force with less than a high school diploma,"% In labor force with less than a high school diploma, margin of error",% In labor force with only a high school diploma,"% In labor force with only a high school diploma, margin of error",% In labor force with some college or associate degree,"% In labor force with some college or associate degree, margin of error",% In labor force with some college or associate degree,"% In labor force with bachelor degree or higher, margin of error",,
12060,"Atlanta-Sandy Springs-Marietta, GA Metro Area",2005,ACS 1Yr Estimate,311122,13650,697733,15320,745127,15515,993625,17333,66.9,1.5,77.5,1,80.5,0.9,85.4,0.7,,
12580,"Baltimore-Towson, MD Metro Area",2005,ACS 1Yr Estimate,138983,7348,369589,10358,386021,9865,505761,10142,64.2,2.6,77.3,1.2,80.9,1,86.4,0.8,,
14460,"Boston-Cambridge-Quincy, MA-NH Metro Area",2005,ACS 1Yr Estimate,198265,9372,570357,16554,573166,12823,1067179,15109,64.1,2.3,78.9,1.1,81.6,0.9,85.2,0.6,,
16980,"Chicago-Naperville-Joliet, IL-IN-WI Metro Area",2005,ACS 1Yr Estimate,632941,17867,1228095,19898,1413097,21766,1727343,21375,65.7,1.1,75.8,0.7,81,0.5,85.5,0.4,,
17140,"Cincinnati-Middletown, OH-KY-IN Metro Area",2005,ACS 1Yr Estimate,116177,6249,371838,9163,292664,8187,311838,7148,57,2.6,77.3,1.1,82.5,1.2,85.3,0.9,,
19100,"Dallas-Fort Worth-Arlington, TX Metro Area",2005,ACS 1Yr Estimate,537981,11181,724466,16752,908289,14717,974034,18033,70,1.3,77.3,0.8,82.3,0.6,85.5,0.6,,
19740,"Denver-Aurora, CO Metro Area",2005,ACS 1Yr Estimate,144098,7760,278331,10338,386504,9249,499316,9326,69,2.5,80.5,1.3,83,1,86.6,0.7,,
19820,"Detroit-Warren-Livonia, MI Metro Area",2005,ACS 1Yr Estimate,241231,9617,670053,14862,795571,12928,692749,11082,58,1.8,71.9,1.1,79.4,0.7,84.1,0.6,,
26420,"Houston-Sugar Land-Baytown, TX Metro Area",2005,ACS 1Yr Estimate,555644,14358,687773,16492,759851,13893,803101,14459,68.9,1.2,76.8,0.9,79.4,0.9,84.8,0.7,,
31100,"Los Angeles-Long Beach-Santa Ana, CA Metro Area",2005,ACS 1Yr Estimate,1524025,25440,1381351,22883,1773968,24575,2056161,21938,67.4,0.7,73.8,0.8,78.4,0.5,83.8,0.4,,
33100,"Miami-Fort Lauderdale-Miami Beach, FL Metro Area",2005,ACS 1Yr Estimate,389560,13198,765489,17836,797988,16222,816145,15750,66.9,1.4,76.6,1,80.3,0.8,82.8,0.7,,
33460,"Minneapolis-St. Paul-Bloomington, MN-WI Metro Area",2005,ACS 1Yr Estimate,106583,5983,385769,8420,557577,9888,679055,11008,70.4,2.5,81.4,1,84.9,0.7,87.5,0.6,,
35620,"New York-Northern New Jersey-Long Island, NY-NJ-PA Metro Area",2005,ACS 1Yr Estimate,1335894,24069,2592944,24207,2293561,24223,3815689,28149,61.6,0.8,74.2,0.5,78.9,0.5,84.2,0.3,,
37980,"Philadelphia-Camden-Wilmington, PA-NJ-DE-MD Metro Area",2005,ACS 1Yr Estimate,288911,11171,949183,15007,747777,13644,1051948,17458,57.9,2.1,75,0.8,82.5,0.7,85.5,0.5,,
38060,"Phoenix-Mesa-Scottsdale, AZ Metro Area",2005,ACS 1Yr Estimate,301113,10259,464113,13192,670725,12896,540782,10548,67.9,1.7,75.8,1.2,78.9,0.9,83.3,0.8,,
38300,"Pittsburgh, PA Metro Area",2005,ACS 1Yr Estimate,73325,4390,432357,8836,353052,8291,387811,9238,53.4,3.1,72.4,1,80.4,1.1,84.5,0.9,,
38900,"Portland-Vancouver-Beaverton, OR-WA Metro Area",2005,ACS 1Yr Estimate,108630,5265,265590,8431,402857,8208,390723,9143,69.6,2.5,77.2,1.5,80.3,0.9,83.9,0.8,,
40140,"Riverside-San Bernardino-Ontario, CA Metro Area",2005,ACS 1Yr Estimate,425169,13205,497722,15401,623966,13613,364682,10478,63.2,1.5,73,1.2,76.3,0.9,81.6,1,,
```
## >>

]

---
.left-column[
##Data conversion
]
.right-column[
###D3.csv loads data into an array of objects
![Alt text](objects.png) 
## >>

]

---
.left-column[
##Data conversion]
.right-column[

###Requires you to refactor so that D3 understands
#### for example:
```javascript
  data.forEach(function(d) {
    d.ages = ageNames.map(function(name) { 
      return {name: name, value: +d[name]}; 
    });
  });
```

```javascript
  // Convert strings to numbers.
  data.forEach(function(d) {
    d.people = +d.people;
    d.year = +d.year;
    d.age = +d.age;
  });
```

```javascript
  data.forEach(function(d) {
    var y0 = 0;
    d.ages = color.domain().map(function(name) { 
      return {name: name, y0: y0, y1: y0 += +d[name]}; 
    });
    d.ages.forEach(function(d) { d.y0 /= y0; d.y1 /= y0; });
  });
```
]
---
template: inverse
#Miso.Dataset
##Assists with restructuring multiple large datasets that require filtering, queries, and aggregations

---


## Use in addition to D3

```xml
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="miso.ds.deps.ie.0.4.1.js" charset="utf-8"></script>
```

---

.left-column[
### Miso.Dataset:
##Fetch

]
.right-column[

## Using Miso.Dataset instead of D3.csv for more powerful operations

```javascript
var ds = new Miso.Dataset({
  url : 'data/myData.csv'
  delimiter : ',',
  columns: [{ name: 'Zip Code', type: 'string' }]
});

ds.fetch({
  success : function() {

  var data = [];

  this.each(function(row, rowIndex){ 
    data.push(row); 
  });

  d3.select("svg").selectAll("circle")
    .data(data)
    .enter()
    .append("circle");
    
  }
})

```
]

---
.left-column[
### Miso.Dataset
###.Dataview:
##Where

]
.right-column[
##Filter your data

```javascript
  var trucks = this.where({

      columns: ['type'],

      rows: function(row) {
        return row.type == "Truck"
      }
    });
```

```javascript
ds.countBy('one').toJSON()
```
###More!
columnNames(),
column(),
columns(),
hasColumn(),
eachColumn(),
each(),
reverseEach(),
rowByPosition(),
rowById(),
rows(),
sort(),
where(),
groupBy(),
countBy(),
movingAverage(),
min(),
max(),
sum(),
mean()
]

---
.left-column[
### Miso.Dataset
###.Dataview:
##Importers

]
.right-column[
##Very easy to pull data from a published Google spreadsheet
```javascript
var ds = new Miso.Dataset({
  importer : Miso.Dataset.Importers.GoogleSpreadsheet,
  parser : Miso.Dataset.Parsers.GoogleSpreadsheet,
  key: "0AhkLvVMCbhKwdHREVGs0Z09TRy1NYUJIZXRhX0I1Ync",
  worksheet: "1"
});
```

]
---
template: inverse
#Google Spreadsheets example

---
template: inverse
# Thanks!

    </textarea>
    <script src="remark.min.js" type="text/javascript">
    </script>
    <script type="text/javascript">
      var slideshow = remark.create({
         highlightStyle: 'monokai'
      });
    </script>
  </body>
</html>